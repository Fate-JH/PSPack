# enable new Trusty build server
sudo: required
dist: trusty

language: c
matrix:
  include:
    - compiler: gcc
      env: PLATFORM="mingw32" ARCH="x86_64" BITSIZE=64 HOST="x86_64"
    - compiler: gcc
      env: PLATFORM="mingw32" ARCH="x86" BITSIZE=32 HOST="i686"

install:
  - sudo add-apt-repository --yes ppa:tobydox/mingw-x-trusty
  - sudo apt-get update -qq
  - uname -m
  - sudo apt-get install -y mingw32
  - if [ $BITSIZE == 32 ]; then sudo apt-get install -y mingw32-x-binutils mingw32-x-gcc mingw32-x-runtime; fi
  - if [ $BITSIZE == 64 ]; then sudo apt-get install -y mingw64-x-binutils mingw64-x-gcc mingw64-x-runtime; fi
  - export MINGW=/opt/mingw$BITSIZE
  - export PATH=$MINGW/bin:$PATH
  - export PREFIX=$HOST-w64-mingw32-

script:
  - gcc -v
  - gcc -dumpmachine
  - make
